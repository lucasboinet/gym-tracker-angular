<div class="bg-white rounded-xl shadow-sm border overflow-hidden">
  <!-- Exercise Header -->
  <div class="px-4 py-3 bg-gray-50 border-b flex items-center justify-between">
    <h4 class="font-semibold text-gray-900">{{ exercise().name }}</h4>
    <p-button
      icon="pi pi-trash"
      (onClick)="onRemoveExercise(exercise()._id!)"
      styleClass="p-button-text p-button-rounded p-button-sm p-button-danger"
      [text]="true"
    >
    </p-button>
  </div>

  <!-- Sets -->
  <div class="p-4 flex flex-col gap-5">
    @for (set of exercise().sets; track $index) {
      <set-input
        [set]="set"
        [exercise]="exercise()"
        [workoutId]="workoutId()"
        [index]="$index"
        (removeSet)="onRemoveSet($event.id, $event.index)"
        (updateSet)="onUpdateSet($event.id, $event.index, $event.type, $event.value)"
      />
    }
  </div>

  <!-- Add Set Button -->
  <div class="px-4">
    <p-button
      label="Add Set"
      icon="pi pi-plus"
      (onClick)="onAddSet(exercise()._id!)"
      styleClass="w-full p-button-outlined"
    >
    </p-button>
  </div>

  <!-- Exercise notes -->
  <div class="p-4 flex flex-col gap-2 mt-1">
    <label for="exercise_notes" class="text-xs font-medium text-gray-500">Notes</label>
    <textarea
      [value]="exercise().notes ?? ''"
      id="exercise_notes"
      rows="5"
      cols="30"
      [placeholder]="
        previousMatchingExercise()?.notes
          ? `Notes from previous exercise : ${previousMatchingExercise()?.notes}`
          : 'No notes from previous exercise'
      "
      class="bg-white text-black border border-blue-100 rounded-lg p-2 w-full focus:outline-none shadow resize-none placeholder:text-black/50"
      (input)="onUpdateExerciseNotes($event)"
    ></textarea>
  </div>
</div>
