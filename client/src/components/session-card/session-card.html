<div class="bg-white rounded-xl shadow-sm border overflow-hidden hover:shadow-md transition-shadow">
  <div class="p-4">
    <div class="flex items-start justify-between mb-3">
      <div class="flex items-center space-x-3">
        <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
          <i class="pi pi-bolt text-purple-600"></i>
        </div>
        <div>
          <h3 class="font-semibold text-gray-900">{{ session().name }}</h3>
          <p class="text-sm text-gray-500">Created {{ durationFromCreatedAt() }}</p>
        </div>
      </div>
      <button
        class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-lg transition-colors"
        (click)="cm.toggle($event)"
      >
        <i class="pi pi-ellipsis-v text-gray-400"></i>
      </button>
    </div>

    <div class="flex items-center space-x-4 text-sm text-gray-500 mb-3">
      <span class="flex items-center">
        <i class="pi pi-list mr-1"></i>
        {{ session().exercises.length }} exercises
      </span>
    </div>

    <div class="flex flex-wrap gap-2 mb-4">
      @for (exercise of session().exercises.slice(0, 3); track $index) {
        <span
          class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700"
          >{{ exercise.name }}</span
        >
      }
      @if (session().exercises.length > 3) {
        <span
          class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700"
          >+{{ session().exercises.length - 3 }} more</span
        >
      }
    </div>

    <div class="flex items-center space-x-3">
      <button
        class="flex-1 bg-blue-600 hover:bg-blue-700 cursor-pointer text-white py-2.5 px-4 rounded-lg font-medium transition-colors"
        (click)="onStartSession()"
      >
        <i class="pi pi-play mr-2"></i>
        Start Session
      </button>
    </div>
  </div>
</div>

<p-contextmenu #cm [model]="contextMenuItems" [pressDelay]="0" />

<session-dialog
  [(open)]="showEditDialog"
  (openChange)="showEditDialog = $event"
  [session]="session()"
  title="Edit session"
  buttonLabel="Update"
  action="edit"
></session-dialog>
